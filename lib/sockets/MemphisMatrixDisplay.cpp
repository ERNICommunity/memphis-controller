/*
 * MemphisMatrixDisplay.cpp
 *
 *  Created on: 29.05.2016
 *      Author: niklausd
 */

#include <Adafruit_GFX.h>
#include <gfxfont.h>
#include <Fonts/TomThumb.h>
#include <Adafruit_NeoMatrix.h>
#include <Adafruit_NeoPixel.h>
#include <MemphisMatrixDisplay.h>
#include <Timer.h>

//-----------------------------------------------------------------------------

class HeartAnimationTimerAdapter : public TimerAdapter
{
private:
  MemphisMatrixDisplay* m_matrixDisplay;
public:
  HeartAnimationTimerAdapter(MemphisMatrixDisplay* matrixDisplay)
  : m_matrixDisplay(matrixDisplay)
  { }

  void timeExpired()
  {
    if (0 != m_matrixDisplay)
    {
      m_matrixDisplay->showNextFrame();
    }
  }
};

//-----------------------------------------------------------------------------

typedef enum
{
  CS_red   = 0,
  CS_green = 1,
  CS_blue  = 2,
  CS_NColors
} ColorSelection;

const uint16_t colors[] =
{ Adafruit_NeoMatrix::Color(0, 255, 0), Adafruit_NeoMatrix::Color(255, 0, 0), Adafruit_NeoMatrix::Color(0, 0, 255) };

// The "original" 4 Frames GIF
#define heartbeating1NUM_FRM 4
const unsigned char heartbeating1Frame[heartbeating1NUM_FRM][CS_NColors][16*16] =
{
  {
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,0,0,0,0,255,255,255,0,0,0,0,0,255,255,255,255,255,0,0,255,255,255,255,255,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255,0,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255,0,0,0,0,0,255,255,255,255,255,255,255,255,255,255,0,0,0,0,0,0,0,255,255,255,255,255,255,255,255,0,0,0,0,0,0,0,0,0,255,255,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,102,102,102,0,0,0,0,102,102,102,0,0,0,0,0,102,102,102,102,102,0,0,102,102,102,102,102,0,0,0,102,102,102,102,102,102,102,102,102,102,102,102,102,102,0,0,102,102,102,102,102,102,102,102,102,102,102,102,102,102,0,0,102,102,102,102,102,102,102,102,102,102,102,102,102,102,0,0,102,102,102,102,102,102,102,102,102,102,102,102,102,102,0,0,102,102,102,102,102,102,102,102,102,102,102,102,102,102,0,0,0,102,102,102,102,102,102,102,102,102,102,102,102,0,0,0,0,102,102,102,102,102,102,102,102,102,102,102,102,0,0,0,0,0,102,102,102,102,102,102,102,102,102,102,0,0,0,0,0,0,0,102,102,102,102,102,102,102,102,0,0,0,0,0,0,0,0,0,102,102,102,102,102,102,0,0,0,0,0,0,0,0,0,0,0,102,102,102,102,0,0,0,0,0,0,0,0,0,0,0,0,0,102,102,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  },
  {
    {0,0,0,255,255,255,0,0,0,0,255,255,255,0,0,0,0,0,255,255,255,255,255,0,0,255,255,255,255,255,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255,0,0,0,0,0,255,255,255,255,255,255,255,255,255,255,0,0,0,0,0,0,0,255,255,255,255,255,255,255,255,0,0,0,0,0,0,0,0,0,255,255,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0},
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
    {0,0,0,102,102,102,0,0,0,0,102,102,102,0,0,0,0,0,102,102,102,102,102,0,0,102,102,102,102,102,0,0,0,102,102,102,102,102,102,102,102,102,102,102,102,102,102,0,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,0,102,102,102,102,102,102,102,102,102,102,102,102,102,102,0,0,102,102,102,102,102,102,102,102,102,102,102,102,102,102,0,0,0,102,102,102,102,102,102,102,102,102,102,102,102,0,0,0,0,0,102,102,102,102,102,102,102,102,102,102,0,0,0,0,0,0,0,102,102,102,102,102,102,102,102,0,0,0,0,0,0,0,0,0,102,102,102,102,102,102,0,0,0,0,0,0,0,0,0,0,0,102,102,102,102,0,0,0,0,0,0,0,0,0,0,0,0,0,102,102,0,0,0,0,0,0,0},
  },
  {
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,0,0,0,0,255,255,255,0,0,0,0,0,255,255,255,255,255,0,0,255,255,255,255,255,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255,0,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255,0,0,0,0,0,255,255,255,255,255,255,255,255,255,255,0,0,0,0,0,0,0,255,255,255,255,255,255,255,255,0,0,0,0,0,0,0,0,0,255,255,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,102,102,102,0,0,0,0,102,102,102,0,0,0,0,0,102,102,102,102,102,0,0,102,102,102,102,102,0,0,0,102,102,102,102,102,102,102,102,102,102,102,102,102,102,0,0,102,102,102,102,102,102,102,102,102,102,102,102,102,102,0,0,102,102,102,102,102,102,102,102,102,102,102,102,102,102,0,0,102,102,102,102,102,102,102,102,102,102,102,102,102,102,0,0,102,102,102,102,102,102,102,102,102,102,102,102,102,102,0,0,0,102,102,102,102,102,102,102,102,102,102,102,102,0,0,0,0,102,102,102,102,102,102,102,102,102,102,102,102,0,0,0,0,0,102,102,102,102,102,102,102,102,102,102,0,0,0,0,0,0,0,102,102,102,102,102,102,102,102,0,0,0,0,0,0,0,0,0,102,102,102,102,102,102,0,0,0,0,0,0,0,0,0,0,0,102,102,102,102,0,0,0,0,0,0,0,0,0,0,0,0,0,102,102,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  },
  {
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,0,0,0,0,255,255,255,0,0,0,0,0,255,255,255,255,255,0,0,255,255,255,255,255,0,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255,0,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255,0,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255,0,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255,0,0,0,0,0,255,255,255,255,255,255,255,255,255,255,0,0,0,0,0,0,255,255,255,255,255,255,255,255,255,255,0,0,0,0,0,0,0,255,255,255,255,255,255,255,255,0,0,0,0,0,0,0,0,0,255,255,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,102,102,102,0,0,0,0,102,102,102,0,0,0,0,0,102,102,102,102,102,0,0,102,102,102,102,102,0,0,0,0,102,102,102,102,102,102,102,102,102,102,102,102,0,0,0,0,102,102,102,102,102,102,102,102,102,102,102,102,0,0,0,0,102,102,102,102,102,102,102,102,102,102,102,102,0,0,0,0,102,102,102,102,102,102,102,102,102,102,102,102,0,0,0,0,0,102,102,102,102,102,102,102,102,102,102,0,0,0,0,0,0,102,102,102,102,102,102,102,102,102,102,0,0,0,0,0,0,0,102,102,102,102,102,102,102,102,0,0,0,0,0,0,0,0,0,102,102,102,102,102,102,0,0,0,0,0,0,0,0,0,0,0,102,102,102,102,0,0,0,0,0,0,0,0,0,0,0,0,0,102,102,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
  }
};

// Animated-Heart_NEW_without-digits_transparent-bg
#define heartbeating2NUM_FRM 10
//const unsigned char heartbeating2Frame[heartbeating2NUM_FRM][CS_NColors][16*16] =
//{
//  {
//    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,214,185,184,193,242,0,0,219,181,183,181,212,0,0,0,189,195,219,220,213,177,236,216,186,220,220,220,193,194,0,219,192,220,220,220,220,216,178,177,220,220,220,220,220,187,225,180,219,220,220,220,220,220,192,199,220,220,220,220,220,218,182,180,220,220,220,220,220,220,213,216,220,220,220,220,220,220,179,179,220,220,220,220,220,220,220,220,220,220,220,220,220,220,180,189,210,220,220,220,220,220,220,220,220,220,220,220,220,216,184,247,176,214,220,220,220,220,255,220,220,220,220,220,220,183,234,0,241,177,208,220,220,220,255,220,220,220,220,220,195,203,0,0,0,249,185,193,219,220,255,220,220,220,220,200,189,0,0,0,0,0,0,214,176,206,220,255,220,220,195,189,254,0,0,0,0,0,0,0,248,194,181,255,219,186,202,0,0,0,0,0,0,0,0,0,0,0,243,193,174,225,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
//    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,204,158,152,172,242,0,0,207,150,136,150,199,0,0,0,171,100,59,58,68,142,234,205,119,58,58,58,104,179,0,209,105,58,58,58,58,64,155,147,58,58,58,58,58,116,218,156,60,58,58,58,58,58,105,91,58,58,58,58,58,61,159,141,58,58,58,58,58,58,68,64,58,58,58,58,58,58,141,141,58,58,58,58,58,58,58,58,58,58,58,58,58,58,141,169,72,58,58,58,58,58,58,58,58,58,58,58,58,64,162,247,148,66,58,58,58,58,255,58,58,58,58,58,58,127,230,0,240,151,75,58,58,58,255,58,58,58,58,58,100,189,0,0,0,249,165,105,59,58,255,58,58,58,58,92,173,0,0,0,0,0,0,204,145,78,58,255,58,58,102,173,254,0,0,0,0,0,0,0,248,179,134,255,59,121,187,0,0,0,0,0,0,0,0,0,0,0,243,172,150,218,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
//    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,202,153,146,168,242,0,0,204,144,127,144,197,0,0,0,167,80,25,24,38,135,233,203,104,25,24,24,85,175,0,206,88,24,24,24,24,32,150,141,25,24,24,24,24,101,217,151,27,24,24,24,24,24,88,67,24,24,24,24,24,29,154,133,24,24,24,24,24,24,37,32,24,24,24,24,24,24,134,134,24,24,24,24,24,24,24,24,24,24,24,24,24,24,133,165,43,24,24,24,24,24,24,24,24,24,24,24,24,32,157,247,143,35,24,24,24,24,255,24,24,24,24,24,24,115,229,0,240,145,47,24,24,24,255,24,24,24,24,24,80,186,0,0,0,249,161,87,25,24,255,24,24,24,24,68,170,0,0,0,0,0,0,202,138,51,24,255,24,24,82,170,254,0,0,0,0,0,0,0,248,175,125,255,26,107,184,0,0,0,0,0,0,0,0,0,0,0,243,168,146,217,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}
//  },
//  {
//    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,249,238,243,254,0,0,249,231,230,247,0,0,0,0,0,204,187,206,199,182,246,230,181,215,216,186,209,0,0,0,225,190,220,220,220,214,185,181,219,220,220,220,186,232,0,0,185,219,220,220,220,220,190,196,220,220,220,220,218,187,0,0,185,220,220,220,220,220,212,214,220,220,220,220,220,184,0,0,185,220,220,220,220,220,220,220,220,220,220,220,220,186,0,0,190,215,220,220,220,220,220,220,220,220,220,220,218,187,0,0,244,181,218,220,220,220,220,220,220,220,220,220,190,232,0,0,0,236,179,215,220,220,220,220,220,220,220,204,196,0,0,0,0,0,243,181,203,220,220,220,220,220,208,184,253,0,0,0,0,0,0,253,201,185,214,220,220,207,183,251,0,0,0,0,0,0,0,0,0,241,187,192,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,244,237,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
//    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,249,232,240,254,0,0,248,218,216,245,0,0,0,0,0,188,122,78,91,154,245,224,134,65,64,119,192,0,0,0,218,112,58,58,58,67,161,150,59,58,58,58,121,228,0,0,158,59,58,58,58,58,112,98,58,58,58,58,61,161,0,0,139,58,58,58,58,58,70,66,58,58,58,58,58,140,0,0,138,58,58,58,58,58,58,58,58,58,58,58,58,137,0,0,165,65,58,58,58,58,58,58,58,58,58,58,61,161,0,0,243,142,60,58,58,58,58,58,58,58,58,58,115,228,0,0,0,232,143,65,58,58,58,58,58,58,58,81,177,0,0,0,0,0,243,155,82,58,58,58,58,58,75,162,253,0,0,0,0,0,0,253,185,130,66,58,58,78,160,251,0,0,0,0,0,0,0,0,0,240,162,109,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,241,231,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
//    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,249,231,240,254,0,0,248,216,214,244,0,0,0,0,0,184,109,51,67,147,245,223,125,34,32,104,188,0,0,0,217,96,24,24,24,36,157,144,26,24,24,24,107,227,0,0,153,26,24,24,24,24,96,77,24,24,24,24,29,155,0,0,131,24,24,24,24,24,40,35,24,24,24,24,24,131,0,0,129,24,24,24,24,24,24,24,24,24,24,24,24,127,0,0,159,34,24,24,24,24,24,24,24,24,24,24,29,155,0,0,243,134,27,24,24,24,24,24,24,24,24,24,99,227,0,0,0,232,135,34,24,24,24,24,24,24,24,56,173,0,0,0,0,0,243,149,58,24,24,24,24,24,47,157,253,0,0,0,0,0,0,253,181,118,35,24,24,50,155,251,0,0,0,0,0,0,0,0,0,240,157,92,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,241,229,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}
//  },
//  {
//    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,254,254,0,0,0,0,0,0,247,189,188,187,196,253,244,183,197,192,187,249,0,0,0,0,185,213,220,220,208,196,185,216,220,220,211,187,0,0,0,246,198,220,220,220,220,189,194,220,220,220,220,195,247,0,0,235,217,220,220,220,220,209,214,220,220,220,220,216,236,0,0,235,219,220,220,220,220,220,220,220,220,220,220,219,235,0,0,245,196,220,220,220,220,220,220,220,220,220,220,201,244,0,0,0,193,207,220,220,220,220,220,220,220,220,218,184,0,0,0,0,253,191,201,220,220,220,220,220,220,220,186,236,0,0,0,0,0,0,205,187,218,220,220,220,220,190,219,0,0,0,0,0,0,0,0,234,183,201,220,220,187,219,0,0,0,0,0,0,0,0,0,0,0,214,184,183,229,0,255,255,0,0,0,0,0,0,0,0,0,0,0,254,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
//    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,254,254,0,0,0,0,0,0,247,163,130,134,174,253,243,150,98,111,162,249,0,0,0,0,158,67,58,58,76,174,158,64,58,58,71,163,0,0,0,243,96,58,58,58,58,122,107,58,58,58,58,105,246,0,0,224,62,58,58,58,58,73,67,58,58,58,58,64,224,0,0,222,60,58,58,58,58,58,58,58,58,58,58,59,222,0,0,242,101,58,58,58,58,58,58,58,58,58,58,90,240,0,0,0,172,78,58,58,58,58,58,58,58,58,61,151,0,0,0,0,253,168,90,58,58,58,58,58,58,58,128,231,0,0,0,0,0,0,188,122,61,58,58,58,58,118,209,0,0,0,0,0,0,0,0,230,154,91,58,58,123,207,0,0,0,0,0,0,0,0,0,0,0,201,142,138,221,0,255,255,0,0,0,0,0,0,0,0,0,0,0,254,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
//    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,254,254,0,0,0,0,0,0,247,158,119,123,169,253,243,143,78,94,157,249,0,0,0,0,152,37,24,24,49,170,153,32,24,24,41,158,0,0,0,243,76,24,24,24,24,108,89,24,24,24,24,86,245,0,0,222,30,24,24,24,24,45,36,24,24,24,24,32,222,0,0,219,27,24,24,24,24,24,24,24,24,24,24,26,219,0,0,242,81,24,24,24,24,24,24,24,24,24,24,67,239,0,0,0,168,52,24,24,24,24,24,24,24,24,28,144,0,0,0,0,253,163,67,24,24,24,24,24,24,24,115,230,0,0,0,0,0,0,184,108,28,24,24,24,24,104,206,0,0,0,0,0,0,0,0,229,148,68,24,25,110,204,0,0,0,0,0,0,0,0,0,0,0,198,133,129,219,0,255,255,0,0,0,0,0,0,0,0,0,0,0,254,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}
//  },
//  {
//    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,238,207,206,227,0,253,211,203,203,237,0,0,0,0,0,229,187,219,220,199,210,195,210,220,219,186,234,0,0,0,0,186,220,220,220,220,188,192,220,220,220,219,187,0,0,0,0,192,220,220,220,220,207,212,220,220,220,220,192,0,0,0,0,196,220,220,220,220,220,220,220,220,220,220,197,0,0,0,0,186,220,220,220,220,220,220,220,220,220,220,187,0,0,0,0,230,191,220,220,220,220,220,220,220,220,206,209,0,0,0,0,0,224,187,218,220,220,220,220,220,213,188,254,0,0,0,0,0,0,237,184,207,220,220,220,213,184,249,0,0,0,0,0,0,0,0,253,204,187,215,210,184,249,0,0,0,0,0,0,0,0,0,0,0,247,207,207,253,0,0,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
//    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,232,179,174,217,0,253,188,158,168,232,0,0,0,0,0,221,122,59,58,98,192,171,72,58,59,126,228,0,0,0,0,150,58,58,58,58,130,116,58,58,58,59,154,0,0,0,0,116,58,58,58,58,76,70,58,58,58,58,117,0,0,0,0,103,58,58,58,58,58,58,58,58,58,58,102,0,0,0,0,144,58,58,58,58,58,58,58,58,58,58,140,0,0,0,0,221,120,58,58,58,58,58,58,58,58,83,192,0,0,0,0,0,213,128,61,58,58,58,58,58,67,159,254,0,0,0,0,0,0,233,151,77,58,58,58,67,152,249,0,0,0,0,0,0,0,0,253,186,128,65,72,154,249,0,0,0,0,0,0,0,0,0,0,0,246,182,183,253,0,0,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
//    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,231,173,168,215,0,253,183,148,161,230,0,0,0,0,0,219,108,26,24,77,188,166,43,24,26,113,227,0,0,0,0,143,25,24,24,24,119,100,24,24,24,26,147,0,0,0,0,100,24,24,24,24,48,40,24,24,24,24,101,0,0,0,0,84,24,24,24,24,24,24,24,24,24,24,82,0,0,0,0,136,25,24,24,24,24,24,24,24,24,24,130,0,0,0,0,220,105,24,24,24,24,24,24,24,24,56,188,0,0,0,0,0,211,115,28,24,24,24,24,24,37,154,254,0,0,0,0,0,0,232,144,50,24,24,24,37,145,249,0,0,0,0,0,0,0,0,253,182,115,33,43,148,249,0,0,0,0,0,0,0,0,0,0,0,246,177,178,253,0,0,0,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}
//  },
//  {
//    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,247,242,252,0,0,246,237,244,0,0,0,0,0,0,0,195,200,210,190,226,210,200,220,201,196,0,0,0,0,0,234,204,220,220,220,188,191,220,220,220,200,237,0,0,0,0,220,220,220,220,220,205,209,220,220,220,220,219,0,0,0,0,218,220,220,220,220,220,220,220,220,220,220,218,0,0,0,0,225,212,220,220,220,220,220,220,220,220,216,224,0,0,0,0,253,188,216,220,220,220,220,220,220,220,189,249,0,0,0,0,0,249,188,209,220,220,220,220,220,197,220,0,0,0,0,0,0,0,253,202,193,218,220,220,197,211,0,0,0,0,0,0,0,0,0,0,237,189,202,193,217,0,0,0,0,0,0,0,0,0,0,0,0,0,245,247,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
//    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,245,237,252,0,0,242,224,240,0,0,0,0,0,0,0,169,94,73,124,214,191,96,58,90,174,0,0,0,0,0,225,86,58,58,58,138,126,58,58,58,94,231,0,0,0,0,190,58,58,58,58,79,73,58,58,58,58,191,0,0,0,0,183,58,58,58,58,58,58,58,58,58,58,183,0,0,0,0,207,70,58,58,58,58,58,58,58,58,64,203,0,0,0,0,253,153,64,58,58,58,58,58,58,58,129,249,0,0,0,0,0,249,156,75,58,58,58,58,58,103,206,0,0,0,0,0,0,0,253,180,114,60,58,58,103,194,0,0,0,0,0,0,0,0,0,0,233,155,91,114,202,0,0,0,0,0,0,0,0,0,0,0,0,0,240,243,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
//    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,244,236,252,0,0,241,221,239,0,0,0,0,0,0,0,164,71,44,109,212,187,74,25,67,168,0,0,0,0,0,223,61,24,24,24,128,113,24,24,24,71,229,0,0,0,0,184,24,24,24,24,53,45,24,24,24,24,185,0,0,0,0,175,24,24,24,24,25,24,24,24,24,24,176,0,0,0,0,204,40,24,24,24,24,24,24,24,24,32,199,0,0,0,0,253,145,33,24,24,24,24,24,24,24,115,249,0,0,0,0,0,249,149,47,24,24,24,24,24,83,203,0,0,0,0,0,0,0,253,176,99,27,24,24,83,190,0,0,0,0,0,0,0,0,0,0,232,148,68,99,198,0,0,0,0,0,0,0,0,0,0,0,0,0,239,242,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}
//  },
//  {
//    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,239,191,193,191,240,227,189,199,189,242,0,0,0,0,0,0,189,219,220,219,189,190,220,220,218,188,0,0,0,0,0,252,203,220,220,220,204,207,220,220,220,201,252,0,0,0,0,250,211,220,220,220,219,219,220,220,220,211,250,0,0,0,0,253,195,220,220,220,220,220,220,220,220,197,253,0,0,0,0,0,214,202,220,220,220,220,220,220,216,196,0,0,0,0,0,0,0,214,195,220,220,220,220,218,188,249,0,0,0,0,0,0,0,0,234,189,208,220,217,188,244,0,0,0,0,0,0,0,0,0,0,254,210,191,189,247,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
//    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,234,149,122,149,235,214,129,98,148,239,0,0,0,0,0,0,147,59,58,59,147,136,58,58,60,149,0,0,0,0,0,251,87,58,58,58,86,77,58,58,58,89,251,0,0,0,0,246,71,58,58,58,59,59,58,58,58,71,246,0,0,0,0,253,112,58,58,58,58,58,58,58,58,105,253,0,0,0,0,0,194,93,58,58,58,58,58,58,64,165,0,0,0,0,0,0,0,194,112,58,58,58,58,60,143,249,0,0,0,0,0,0,0,0,227,147,75,58,62,143,241,0,0,0,0,0,0,0,0,0,0,254,191,130,151,247,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
//    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,232,140,107,140,234,211,115,77,139,239,0,0,0,0,0,0,138,26,24,26,138,124,24,24,27,141,0,0,0,0,0,250,62,24,24,24,61,50,24,24,24,66,250,0,0,0,0,246,42,24,24,24,26,25,24,24,24,42,246,0,0,0,0,253,96,24,24,24,24,24,24,24,24,87,253,0,0,0,0,0,190,70,24,24,24,24,24,24,33,159,0,0,0,0,0,0,0,190,94,25,24,24,24,27,134,249,0,0,0,0,0,0,0,0,225,138,47,24,30,134,241,0,0,0,0,0,0,0,0,0,0,254,187,118,143,246,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}
//  },
//  {
//    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,247,242,252,0,0,246,237,244,0,0,0,0,0,0,0,195,200,210,190,226,210,200,220,201,196,0,0,0,0,0,234,204,220,220,220,188,191,220,220,220,200,237,0,0,0,0,220,220,220,220,220,205,209,220,220,220,220,219,0,0,0,0,218,220,220,220,220,220,220,220,220,220,220,218,0,0,0,0,225,212,220,220,220,220,220,220,220,220,216,224,0,0,0,0,253,188,216,220,220,220,220,220,220,220,189,249,0,0,0,0,0,249,188,209,220,220,220,220,220,197,220,0,0,0,0,0,0,0,253,202,193,218,220,220,197,211,0,0,0,0,0,0,0,0,0,0,237,189,202,193,217,0,0,0,0,0,255,255,0,0,0,0,0,0,245,247,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
//    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,245,237,252,0,0,242,224,240,0,0,0,0,0,0,0,169,94,73,124,214,191,96,58,90,174,0,0,0,0,0,225,86,58,58,58,138,126,58,58,58,94,231,0,0,0,0,190,58,58,58,58,79,73,58,58,58,58,191,0,0,0,0,183,58,58,58,58,58,58,58,58,58,58,183,0,0,0,0,207,70,58,58,58,58,58,58,58,58,64,203,0,0,0,0,253,153,64,58,58,58,58,58,58,58,129,249,0,0,0,0,0,249,156,75,58,58,58,58,58,103,206,0,0,0,0,0,0,0,253,180,114,60,58,58,103,194,0,0,0,0,0,0,0,0,0,0,233,155,91,114,202,0,0,0,0,0,255,255,0,0,0,0,0,0,240,243,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
//    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,244,236,252,0,0,241,221,239,0,0,0,0,0,0,0,164,71,44,109,212,187,74,25,67,168,0,0,0,0,0,223,61,24,24,24,128,113,24,24,24,71,229,0,0,0,0,184,24,24,24,24,53,45,24,24,24,24,185,0,0,0,0,175,24,24,24,24,25,24,24,24,24,24,176,0,0,0,0,204,40,24,24,24,24,24,24,24,24,32,199,0,0,0,0,253,145,33,24,24,24,24,24,24,24,115,249,0,0,0,0,0,249,149,47,24,24,24,24,24,83,203,0,0,0,0,0,0,0,253,176,99,27,24,24,83,190,0,0,0,0,0,0,0,0,0,0,232,148,68,99,198,0,0,0,0,0,255,255,0,0,0,0,0,0,239,242,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}
//  },
//  {
//    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,238,207,206,227,0,253,211,203,203,237,0,0,0,0,0,229,187,219,220,199,210,195,210,220,219,186,234,0,0,0,0,186,220,220,220,220,188,192,220,220,220,219,187,0,0,0,0,192,220,220,220,220,207,212,220,220,220,220,192,0,0,0,0,196,220,220,220,220,220,220,220,220,220,220,197,0,0,0,0,186,220,220,220,220,220,220,220,220,220,220,187,0,0,0,0,230,191,220,220,220,220,220,220,220,220,206,209,0,0,0,0,0,224,187,218,220,220,220,220,220,213,188,254,0,0,0,0,0,0,237,184,207,220,220,220,213,184,249,0,0,0,0,0,0,0,0,253,204,187,215,210,184,249,0,0,0,0,0,0,255,255,0,0,0,247,207,207,253,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
//    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,232,179,174,217,0,253,188,158,168,232,0,0,0,0,0,221,122,59,58,98,192,171,72,58,59,126,228,0,0,0,0,150,58,58,58,58,130,116,58,58,58,59,154,0,0,0,0,116,58,58,58,58,76,70,58,58,58,58,117,0,0,0,0,103,58,58,58,58,58,58,58,58,58,58,102,0,0,0,0,144,58,58,58,58,58,58,58,58,58,58,140,0,0,0,0,221,120,58,58,58,58,58,58,58,58,83,192,0,0,0,0,0,213,128,61,58,58,58,58,58,67,159,254,0,0,0,0,0,0,233,151,77,58,58,58,67,152,249,0,0,0,0,0,0,0,0,253,186,128,65,72,154,249,0,0,0,0,0,0,255,255,0,0,0,246,182,183,253,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
//    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,231,173,168,215,0,253,183,148,161,230,0,0,0,0,0,219,108,26,24,77,188,166,43,24,26,113,227,0,0,0,0,143,25,24,24,24,119,100,24,24,24,26,147,0,0,0,0,100,24,24,24,24,48,40,24,24,24,24,101,0,0,0,0,84,24,24,24,24,24,24,24,24,24,24,82,0,0,0,0,136,25,24,24,24,24,24,24,24,24,24,130,0,0,0,0,220,105,24,24,24,24,24,24,24,24,56,188,0,0,0,0,0,211,115,28,24,24,24,24,24,37,154,254,0,0,0,0,0,0,232,144,50,24,24,24,37,145,249,0,0,0,0,0,0,0,0,253,182,115,33,43,148,249,0,0,0,0,0,0,255,255,0,0,0,246,177,178,253,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}
//  },
//  {
//    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,254,254,0,0,0,0,0,0,247,189,188,187,196,253,244,183,197,192,187,249,0,0,0,0,185,213,220,220,208,196,185,216,220,220,211,187,0,0,0,246,198,220,220,220,220,189,194,220,220,220,220,195,247,0,0,235,217,220,220,220,220,209,214,220,220,220,220,216,236,0,0,235,219,220,220,220,220,220,220,220,220,220,220,219,235,0,0,245,196,220,220,220,220,220,220,220,220,220,220,201,244,0,0,0,193,207,220,220,220,220,220,220,220,220,218,184,0,0,0,0,253,191,201,220,220,220,220,220,220,220,186,236,0,0,0,0,0,0,205,187,218,220,220,220,220,190,219,0,0,0,0,0,0,0,0,234,183,201,220,220,187,219,0,0,0,0,0,0,0,0,255,255,0,214,184,183,229,0,0,0,0,0,0,0,0,0,0,0,0,0,0,254,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
//    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,254,254,0,0,0,0,0,0,247,163,130,134,174,253,243,150,98,111,162,249,0,0,0,0,158,67,58,58,76,174,158,64,58,58,71,163,0,0,0,243,96,58,58,58,58,122,107,58,58,58,58,105,246,0,0,224,62,58,58,58,58,73,67,58,58,58,58,64,224,0,0,222,60,58,58,58,58,58,58,58,58,58,58,59,222,0,0,242,101,58,58,58,58,58,58,58,58,58,58,90,240,0,0,0,172,78,58,58,58,58,58,58,58,58,61,151,0,0,0,0,253,168,90,58,58,58,58,58,58,58,128,231,0,0,0,0,0,0,188,122,61,58,58,58,58,118,209,0,0,0,0,0,0,0,0,230,154,91,58,58,123,207,0,0,0,0,0,0,0,0,255,255,0,201,142,138,221,0,0,0,0,0,0,0,0,0,0,0,0,0,0,254,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
//    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,254,254,0,0,0,0,0,0,247,158,119,123,169,253,243,143,78,94,157,249,0,0,0,0,152,37,24,24,49,170,153,32,24,24,41,158,0,0,0,243,76,24,24,24,24,108,89,24,24,24,24,86,245,0,0,222,30,24,24,24,24,45,36,24,24,24,24,32,222,0,0,219,27,24,24,24,24,24,24,24,24,24,24,26,219,0,0,242,81,24,24,24,24,24,24,24,24,24,24,67,239,0,0,0,168,52,24,24,24,24,24,24,24,24,28,144,0,0,0,0,253,163,67,24,24,24,24,24,24,24,115,230,0,0,0,0,0,0,184,108,28,24,24,24,24,104,206,0,0,0,0,0,0,0,0,229,148,68,24,25,110,204,0,0,0,0,0,0,0,0,255,255,0,198,133,129,219,0,0,0,0,0,0,0,0,0,0,0,0,0,0,254,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}
//  },
//  {
//    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,249,238,243,254,0,0,249,231,230,247,0,0,0,0,0,204,187,206,199,182,246,230,181,215,216,186,209,0,0,0,225,190,220,220,220,214,185,181,219,220,220,220,186,232,0,0,185,219,220,220,220,220,190,196,220,220,220,220,218,187,0,0,185,220,220,220,220,220,212,214,220,220,220,220,220,184,0,0,185,220,220,220,220,220,220,220,220,220,220,220,220,186,0,0,190,215,220,220,220,220,220,220,220,220,220,220,218,187,0,0,244,181,218,220,220,220,220,220,220,220,220,220,190,232,0,0,0,236,179,215,220,220,220,220,220,220,220,204,196,0,0,0,0,0,243,181,203,220,220,220,220,220,208,184,253,0,0,0,0,0,0,253,201,185,255,220,220,207,183,251,0,0,0,0,0,0,0,0,0,241,255,192,199,189,253,0,0,0,0,0,0,0,0,0,0,255,0,244,237,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
//    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,249,232,240,254,0,0,248,218,216,245,0,0,0,0,0,188,122,78,91,154,245,224,134,65,64,119,192,0,0,0,218,112,58,58,58,67,161,150,59,58,58,58,121,228,0,0,158,59,58,58,58,58,112,98,58,58,58,58,61,161,0,0,139,58,58,58,58,58,70,66,58,58,58,58,58,140,0,0,138,58,58,58,58,58,58,58,58,58,58,58,58,137,0,0,165,65,58,58,58,58,58,58,58,58,58,58,61,161,0,0,243,142,60,58,58,58,58,58,58,58,58,58,115,228,0,0,0,232,143,65,58,58,58,58,58,58,58,81,177,0,0,0,0,0,243,155,82,58,58,58,58,58,75,162,253,0,0,0,0,0,0,253,185,130,255,58,58,78,160,251,0,0,0,0,0,0,0,0,0,240,255,109,96,169,253,0,0,0,0,0,0,0,0,0,0,255,0,241,231,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
//    {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,249,231,240,254,0,0,248,216,214,244,0,0,0,0,0,184,109,51,67,147,245,223,125,34,32,104,188,0,0,0,217,96,24,24,24,36,157,144,26,24,24,24,107,227,0,0,153,26,24,24,24,24,96,77,24,24,24,24,29,155,0,0,131,24,24,24,24,24,40,35,24,24,24,24,24,131,0,0,129,24,24,24,24,24,24,24,24,24,24,24,24,127,0,0,159,34,24,24,24,24,24,24,24,24,24,24,29,155,0,0,243,134,27,24,24,24,24,24,24,24,24,24,99,227,0,0,0,232,135,34,24,24,24,24,24,24,24,56,173,0,0,0,0,0,243,149,58,24,24,24,24,24,47,157,253,0,0,0,0,0,0,253,181,118,255,24,24,50,155,251,0,0,0,0,0,0,0,0,0,240,255,92,74,165,253,0,0,0,0,0,0,0,0,0,0,255,0,241,229,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}
//  }
//};

MemphisMatrixDisplay::MemphisMatrixDisplay(uint8_t pin)
: Adafruit_NeoMatrix(16, 16, pin, NEO_MATRIX_TOP + NEO_MATRIX_LEFT + NEO_MATRIX_COLUMNS + NEO_MATRIX_ZIGZAG, NEO_GRB + NEO_KHZ800)
, m_heartBeatRate(0)
, m_heartAnimationTimer(new Timer(new HeartAnimationTimerAdapter(this), Timer::IS_RECURRING))
, m_frame(0)
, m_isDisplayActive(false)
, m_showHeart2(false)
{
  begin();
  setTextWrap(false);
  setBrightness(10);
  setFont(&TomThumb);
  setTextColor(colors[CS_blue]);
}

MemphisMatrixDisplay::~MemphisMatrixDisplay()
{
  delete m_heartAnimationTimer->adapter();
  m_heartAnimationTimer->attachAdapter(0);

  delete m_heartAnimationTimer;
  m_heartAnimationTimer = 0;
}

void MemphisMatrixDisplay::setHeartBeatRate(unsigned int heartBeatRate)
{
  m_heartBeatRate = heartBeatRate;
  if (0 != m_heartAnimationTimer)
  {
    if (0 != m_heartBeatRate)
    {
      // Fix division by zero bug!
      const unsigned long timeMillis = (60000 / m_heartBeatRate) / (m_showHeart2 ? heartbeating2NUM_FRM : heartbeating1NUM_FRM);
      m_heartAnimationTimer->startTimer(timeMillis);
    }
    else
    {
      m_heartAnimationTimer->cancelTimer();
    }
  }
  updateDisplay();
}

void MemphisMatrixDisplay::showNextFrame()
{
  m_frame++;
  if (0 == (m_frame % (m_showHeart2 ? heartbeating2NUM_FRM : heartbeating1NUM_FRM)))
  {
    m_frame = 0;
  }
  updateDisplay();
}

void MemphisMatrixDisplay::updateDisplay()
{
  if (m_isDisplayActive)
  {
    fillScreen(0);
    updateHeart();
    updateText();
    show();
  }
}

void MemphisMatrixDisplay::updateText()
{
  setCursor(4, 10);
  print(String(m_heartBeatRate));
}

uint16_t MemphisMatrixDisplay::drawRGB24toRGB565(byte r, byte g, byte b)
{
  return ((r / 8) << 11) | ((g / 4) << 5) | (b / 8);
}

void MemphisMatrixDisplay::updateHeart()
{
  for (byte y = 0; y < 16; y++)
  {
    for (byte x = 0; x < 16; x++)
    {
      byte loc = x + y * 16;
//      if (m_showHeart2 && (heartbeating2NUM_FRM > m_frame))
//      {
//        drawPixel(x, y,
//            drawRGB24toRGB565(
//                heartbeating2Frame[m_frame][CS_red][loc],
//                heartbeating2Frame[m_frame][CS_green][loc],
//                heartbeating2Frame[m_frame][CS_blue][loc]));
//      }
//      else
      if (heartbeating1NUM_FRM > m_frame)
      {
        drawPixel(x, y,
            drawRGB24toRGB565(
                heartbeating1Frame[m_frame][CS_red][loc],
                heartbeating1Frame[m_frame][CS_green][loc],
                heartbeating1Frame[m_frame][CS_blue][loc]));
      }
    }
  }
}

void MemphisMatrixDisplay::selectFrame2(bool isFrame2)
{
  m_showHeart2 = isFrame2;
}

void MemphisMatrixDisplay::activateDisplay()
{
  m_isDisplayActive = true;
  setTextColor(colors[CS_blue]);
  updateDisplay();
}

void MemphisMatrixDisplay::deactivateDisplay()
{
//  m_isDisplayActive = false;
//  fillScreen(0);
//  show();
  setTextColor(colors[CS_red]);
  updateDisplay();
}
